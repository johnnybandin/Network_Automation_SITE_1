## Config generated by Ansible and Jinja2

hostname {{item.hostname}}

archive
 log config
  logging enable
  logging persistent auto
  logging size 1000
  hidekeys


interface loopback0
description ///Router-ID\\\
ip address {{item.loopbackip}}

router ospf 1
 network {{item.network}}
 network {{item.network1}}
 area 0 authentication message-digest

interface {{item.gigabitethernet0}}
 ip add {{item.gi0ip}}
 service-policy output {{item.policy_QOS}}
 no shut

interface {{item.gigabitethernet1}}
 ip add {{item.gi1ip}}
 ip ospf message-digest-key 1 md5 {{item.ospfkey}}
 no shut

aaa new-model 

tacacs server {{item.tacacs_name}}
 address ipv4 {{item.tacacsip}}
 key {{item.tacacskey}}

aaa group server tacacs+ {{item.tacacsgroup}}
 server name {{item.tacacs_name}}
     
aaa authentication login default group {{item.tacacsgroup}} local

ntp server {{item.ntpmaster}}
clock timezone {{item.timezone}}

key chain {{item.chain}}
 key 1
  send-lifetime {{item.key1time}}
  accept-lifetime {{item.key1time}}
  key-string {{item.key1}}
ip access-list standard {{item.ssh_in}}
  permit {{item.ssh_in_ip}}
  permit {{item.ssh_in_ip1}}

class-map {{item.video_class}}
  match application {{item.webex}}
  match application {{item.jabber}}
  match application {{item.h323}}
  match {{item.priority_high}}
  match {{item.immediate_high}}
  match {{item.priority_ef}}

class-map {{item.voice_class}}
 match application {{item.voip}}
 match {{item.priority_medium}}
 match {{item.immediate_medium}}


policy-map {{item.policy_QOS}}
 class {{item.video_class}}
  bandwidth percent 50
 class {{item.voice_class}}
  bandwidth percent 30
 class class-default
  bandwidth percent 20

line vty 0 4
 access-class {{item.ssh_in}} in 