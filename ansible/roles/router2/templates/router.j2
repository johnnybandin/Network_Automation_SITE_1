## Config generated by Ansible and Jinja2

hostname {{item.hostname}}

archive 
 log Config 
  logging enable
  logging size 1000
  logging persistent auto
  hidekeys

interface loopback0
 description ///Loopback_0\\\
 ip address {{item.loopbackip0}}

interface loopback1
 description ///Loopback_1\\\
 ip address {{item.loopbackip1}}

interface loopback2
 description ///Loopback_2\\\
 ip address {{item.loopbackip2}}

interface loopback3
 description ///Loopback_3\\\
 ip address {{item.loopbackip3}}

interface {{item.gigabitethernet1}}
 description ///TO_VIRLR2_G0/4\\\
 ip address {{item.gi1ip}}
 bandwidth 256
 no shut

interface {{item.gigabitethernet2}}
 description ///TO_VIRLR2_G0/5\\\
 ip add {{item.gi2ip}}
 bandwidth 512
 no shut

interface {{item.gigabitethernet3}}
 description ///TO_NAT_CLOUD\\\
 ip add {{item.gi3ip}}
 service-policy output {{item.policy_QOS}}

aaa new-model

tacacs server {{item.tacacs_name}}
 address ipv4 {{item.tacacsip}}
 key {{item.tacacskey}}

aaa group server tacacs+ {{item.tacacsgroup}}
 server name {{item.tacacs_name}}

aaa authentication login default group {{item.tacacsgroup}} local

ntp server {{item.ntpmaster}}
clock timezone {{item.timezone}}

key chain {{item.chain}}
 key 1
  send-lifetime {{item.key1time}}
  accept-lifetime {{item.key1time}}
  key-string {{item.key1}}

ip access-list standard {{item.ssh_in}}
  permit {{item.ssh_in_ip}}
  permit {{item.ssh_in_ip1}}

class-map {{item.video_class}}
  match application {{item.webex}}
  match application {{item.jabber}}
  match application {{item.h323}}
  match {{item.priority_high}}
  match {{item.immediate_high}}
  match {{item.priority_ef}}

class-map {{item.voice_class}}
 match application {{item.voip}}
 match {{item.priority_medium}}
 match {{item.immediate_medium}}


policy-map {{item.policy_QOS}}
 class {{item.video_class}}
  bandwidth percent 50
 class {{item.voice_class}}
  bandwidth percent 30
 class class-default
  bandwidth percent 20

line vty 0 4
 access-class {{item.ssh_in}} in 

router eigrp {{item.eigrpname}}
 address-family ipv4 unicast auto {{item.as}}
  network {{item.network0}}
  network {{item.network1}}
  network {{item.network2}}
  af-interface default
   passive-interface
   exit
  af-interface {{item.gigabitethernet1}}
   summary-address {{item.summary_address_loopbacks}}
   authentication key-chain {{item.chain}}
   authentication mode md5
   no passive-interface
  af-interface {{item.gigabitethernet2}}
   summary-address {{item.summary_address_loopbacks}}
   authentication key-chain {{item.chain}}
   authentication mode md5
   no passive-interface
  topology base
   variance 2
  exit
router rip 
 version 2 
 no auto-summary
 network {{item.network3}}
 redistribute eigrp {{item.as}} metric 1
 
